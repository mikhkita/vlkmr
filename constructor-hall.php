<?$mobile = (preg_match('/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i',$_SERVER['HTTP_USER_AGENT'])||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i',substr($_SERVER['HTTP_USER_AGENT'],0,4)));?>
<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta name="keywords" content=''>
	<meta name="description" content=''>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">
	<link rel="stylesheet" href="css/reset.css" type="text/css">
	<link rel="stylesheet" href="css/jquery.fancybox.css" type="text/css">
	<link rel="stylesheet" href="css/jquery.fancybox-thumbs.css" type="text/css">
	<link rel="stylesheet" href="css/slick.css" type="text/css">
	<link rel="stylesheet" href="css/KitAnimate.css" type="text/css">
	<link rel="stylesheet" href="css/layout.css" type="text/css">
	<link rel="icon" type="image/vnd.microsoft.icon" href="favicon.ico">

	<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="js/jquery.fancybox.js"></script>
	<script type="text/javascript" src="js/jquery.fancybox-thumbs.js"></script>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
	<script type="text/javascript" src="js/slick.js"></script>
	<script type="text/javascript" src="js/TweenMax.min.js"></script>
	<script type="text/javascript" src="js/swipe.js"></script>
	<script type="text/javascript" src="js/parallax.min.js"></script>
	<script type="text/javascript" src="js/numericInput.js"></script>
	<script type="text/javascript" src="js/css3-mediaqueries.js"></script>
	<script type="text/javascript" src="js/autosize.min.js"></script>
	<script type="text/javascript" src="js/jquery.maskedinput.min.js"></script>
	<script type="text/javascript" src="js/jquery.validate.min.js"></script>
	<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
	<script type="text/javascript" src="js/KitProgress.js"></script>
	<script type="text/javascript" src="js/KitAnimate.js"></script>
	<script type="text/javascript" src="js/countUp.js"></script>
	<script type="text/javascript" src="js/device.js"></script>
	<script type="text/javascript" src="js/KitSend.js"></script>
	<script type="text/javascript" src="js/main.js"></script>

	<link rel="stylesheet" type="text/css" href="css/jquery.qtip.min.css"/>
	<script type="text/javascript" src="js/jquery.qtip.min.js"></script>
	<script type="text/javascript" src="js/progressbar.min.js"></script>
	<script type="text/javascript" src="js/imagesloaded.pkgd.min.js"></script>

	<script>
var myWidth,
	isMobile = false,
	isRetina = false,
	slideout = false;

if( typeof( window.innerWidth ) == 'number' ) {
    myWidth = window.innerWidth;
} else if( document.documentElement && ( document.documentElement.clientWidth || 
document.documentElement.clientHeight ) ) {
    myWidth = document.documentElement.clientWidth;
} else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
    myWidth = document.body.clientWidth;
}

window.addEventListener("orientationchange", onOrientation, false);

function onOrientation() {
    if( device.mobile() ){
    	if( window.orientation == 0 ){
	        document.getElementById("viewport").setAttribute("content", "width=750, user-scalable=no");
	    }else{
	        document.getElementById("viewport").setAttribute("content", "width=768, user-scalable=no");
	    }
    }else if( device.tablet() ){
    	if( window.orientation == 0 ){
	        document.getElementById("viewport").setAttribute("content", "width=768, user-scalable=no");
	    }else{
	        document.getElementById("viewport").setAttribute("content", "width=device-width, user-scalable=no");
	    }
    }

    if( slideout != false )
        slideout.close();
}
onOrientation();

function retina(){
	var mediaQuery = "(-webkit-min-device-pixel-ratio: 1.5),\
        (min--moz-device-pixel-ratio: 1.5),\
        (-o-min-device-pixel-ratio: 3/2),\
        (min-resolution: 1.5dppx)";
	if (window.devicePixelRatio > 1)
	    return true;
	if (window.matchMedia && window.matchMedia(mediaQuery).matches)
	    return true;
	return false;
}

if( myWidth < 768 ){
	isMobile = true;
	body.className += " mobile";
}

isRetina = (isMobile)?false:retina();

</script>

	<link rel="stylesheet" media="screen and (min-width: 1024px) and (max-width: 1240px)" href="css/layout-tablet.css" />
	<link rel="stylesheet" media="screen and (min-width: 751px) and (max-width: 1023px)" href="css/layout-small-tablet.css" />
	<link rel="stylesheet" media="screen and (min-width: 240px) and (max-width: 750px)" href="css/layout-mobile.css" />

<script>
var myWidth,
	isMobile = false,
	isRetina = false,
	slideout = false;

if( typeof( window.innerWidth ) == 'number' ) {
    myWidth = window.innerWidth;
} else if( document.documentElement && ( document.documentElement.clientWidth || 
document.documentElement.clientHeight ) ) {
    myWidth = document.documentElement.clientWidth;
} else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
    myWidth = document.body.clientWidth;
}

window.addEventListener("orientationchange", onOrientation, false);

function onOrientation() {
    if( device.mobile() ){
    	if( window.orientation == 0 ){
	        document.getElementById("viewport").setAttribute("content", "width=750, user-scalable=no");
	    }else{
	        document.getElementById("viewport").setAttribute("content", "width=768, user-scalable=no");
	    }
    }else if( device.tablet() ){
    	if( window.orientation == 0 ){
	        document.getElementById("viewport").setAttribute("content", "width=768, user-scalable=no");
	    }else{
	        document.getElementById("viewport").setAttribute("content", "width=device-width, user-scalable=no");
	    }
    }

    if( slideout != false )
        slideout.close();
}
onOrientation();

function retina(){
	var mediaQuery = "(-webkit-min-device-pixel-ratio: 1.5),\
        (min--moz-device-pixel-ratio: 1.5),\
        (-o-min-device-pixel-ratio: 3/2),\
        (min-resolution: 1.5dppx)";
	if (window.devicePixelRatio > 1)
	    return true;
	if (window.matchMedia && window.matchMedia(mediaQuery).matches)
	    return true;
	return false;
}

if( myWidth < 768 ){
	isMobile = true;
	body.className += " mobile";
}

isRetina = (isMobile)?false:retina();


	var isIE = false;

	if (!('querySelector' in document)  //скорее всего ie 9+
	     || !('localStorage' in window)  //ie 8+
	     || !('addEventListener' in window)  //ie 8 + (возможно)
	    || !('matchMedia' in window)) {//ie 10+

	    isIE = true;	
	}

</script>
</head>
<body>
	<!-- <ul class="ps-lines">
		<li class="v" style="margin-left:-581px"></li>
		<li class="v" style="margin-left:580px"></li>
		<li class="v" ></li>
	</ul> -->
	<div class="b-fixed-sides">
		<div class="b-fixed-side b-fixed-left">
			<div class="b-fixed-side-item" style="background-image: url('i/catalog-b.jpg');"></div>
		</div>
		<div class="b-fixed-side b-fixed-right">
			<div class="b-fixed-side-item" style="background-image: url('i/catalog-b.jpg');"></div>
		</div>
	</div>
	<div class="b b-head">
		<div class="b-wide-block">
			<div class="b-block clearfix">
				<div class="b-logo-cont left">
					<a href='index.php' class="b-logo"></a>
				</div>
				<div class="b-lk-auth-block right">
					<div class="b-three-color"></div>
					<div class="b-lk-white">
						<h2>Кабинет дилера</h2>
						<form action="" id="b-lk-form">
							<input type="text" class="lk-check" data-field="login" placeholder="Логин" required/>
							<input type="password" class="lk-check" data-field="password" placeholder="Пароль" required/>
							<input type="submit" style="display:none;">
							<div class="clearfix b-lk-auth-buttons">
								<div class="b-custom-inputs left">
									<input type="checkbox" id="remember_me" name="remember_me" value="Y">
									<label for="remember_me">Запомнить</label>
								</div>
								<div class="right">
									<a href="#" class="ajax b-orange-butt" onclick="$('#b-lk-form').submit(); return false;">Войти</a>
								</div>
							</div>
						</form>
					</div>
					<div class="b-lk-orange">
						<a href="#" class="icon icon-help">Задать вопрос</a>
					</div>
				</div>
				<ul class="b-lang-nav clearfix right">
					<p class="left">Язык:</p>
					<ul class="b-lang-list left clearfix">
						<li class="left"><a href="#" class="b-ru active"></a></li>
						<li class="left"><a href="#" class="b-en"></a></li>
					</ul>
				</ul>
			</div>
		</div>
	</div>
	<div class="b-menu-block">
		<div class="b-wide-block">
			<div class="b-block clearfix">
				<ul class="b-menu left clearfix">
					<li>
						<a href="about.php">О нас</a>
						<ul class="b-submenu">
							<li><a href="history.php">История</a></li>
							<li><a href="news.php">Новости</a></li>
						</ul>
					</li>
					<li>
						<a href="catalog.php">Продукция</a>
						<ul class="b-submenu">
							<li><a href="catalog.php">ЛДСП</a></li>
							<li><a href="styles.php">ДСП</a></li>
							<li><a href="styles.php">Пиломатериал</a></li>
							<li><a href="styles.php">Кромка</a></li>
						</ul>
					</li>
					<li>
						<a href="production.php">Производство</a>
						<ul class="b-submenu">
							<li><a href="production.php">Переработка древесины</a></li>
							<li><a href="production.php">Производство ДСП</a></li>
							<li><a href="production.php">Ламинирование ДСП</a></li>
							<li><a href="production.php">Импрегнирование бумаги</a></li>
						</ul>
					</li>
					<li><a href="dealers.php">Дилеры</a></li>
					<li>
						<a href="vacancies.php">Вакансии</a>
						<ul class="b-submenu">
							<li><a href="#">Отправить резюме</a></li>
						</ul>
					</li>
					<li><a href="faq.php">FAQ</a></li>
					<li><a href="contacts.php">Контакты</a></li>
				</ul>
				<a href="#" class="left icon icon-search b-search-butt"></a>
			</div>
		</div>
	</div>
	<div class="b b-inner-slider">
		<div class="b-wide-block">
			<div class="b-slider">
				<div class="b-slide" data-parallax="scroll" data-image-src="i/catalog.jpg" >
					<div class="b-block">
						<h3>Работаем с 1980 года</h3>
					</div>	
				</div>
			</div>
		</div>
	</div>
	<div class="b b-content">
		<div class="b-wide-block b-margin" style="padding-bottom: 0px;">
			<div class="b-block">
				<ul class="b-breadcrumbs clearfix">
					<li><a href="#">Главная</a></li>
					<li><a href="#">О нас</a></li>
				</ul>
				<h1 class="b-title">Конструктор декоров</h1>
				
<!--Конструктор-->

	<script type="text/javascript">

		var checkSize = false;
		$(document).ready(function(){
			var height = 100;
			$('#room').imagesLoaded( function() {
				bar.animate(1);
			});
			$('.relBackground').css({"height": $(window).height() - height});
			$('.progressbarContain').css({
				"top": ($(window).height() - height)/2 - 40
			});
			if($(window).width() < $('.b-wide-block').width()){
				$('.progressbarContain').css({
					"left": ($(window).width())/2 - 40
				});
			}else{
				$('.progressbarContain').css({
					"left": ($('.relBackground').width())/2 - 40
				});
			}
			$(window).resize(function(){
				if(checkSize === false){
					$('#room, #roomSVG, #roomSVGFront, #roomSVGBack').css({
						"height": $(window).height() - height,
						"width": "auto"
					});
				}
					console.log($('#room').width() > $('.b-wide-block').width());
					if($('#room').width() > $('.b-wide-block').width())
					{
						$('#room, #roomSVG, #roomSVGFront, #roomSVGBack').css({
							"height": "auto",
							"width": $('.b-wide-block').width()
						});
					}
					$('.rel').css("display", "block");
					$('.rel').css({"width": $('#room').width(), "height": $('#room').height()});
					$('.relBackground').css({"height": ""});
					//checkSize = false;
				
			});
			//После загрузки страницы вызываем ресайз
			$(window).load(function(e){
				$(window).resize();
				$('.progressbarContain').fadeOut(300);
			});
			//$('#room').load();
			$('.fullSize').click(function(){
					if(checkSize === false){
						var curWidth = $('#room').width();
						$('#room').css({
							"height": "auto",
							"width": $('.b-wide-block').width()});
						var autoHeight = $('#room').height();
						$('.rel, #room, #roomSVG, #roomSVGFront, #roomSVGBack').width(curWidth).animate(
							{
								height: autoHeight,
								width: $('.b-wide-block').width()
							});
						$('.fullSize[title]').qtip('option', 'content.text', 'Уместить по высоте');
						$('.icon-small-size').css("display", "inline-block");
						$('.icon-full-size').css("display", "none");
						checkSize = true;
					}else 
						if(checkSize === true && $('.rel').height() > $(window).height() - 100){
							var curHeight = $('#room').height();
							$('#room').css({
								"height": $(window).height() - height,
								"width": "auto"});
							var autoWidth = $('#room').width();
							$('.rel, #room, #roomSVG, #roomSVGFront, #roomSVGBack').height(curHeight).animate(
								{
									height: $(window).height() - height,
									width: autoWidth
								});
							$('.fullSize[title]').qtip('option', 'content.text', 'Во всю ширину');
							$('.icon-small-size').css("display", "none");
							$('.icon-full-size').css("display", "inline-block");
							checkSize = false;
					}
			});

			  $('.repeatPrev[title], .repeatNext[title], .iconMore[title], .layers[title], .share[title]').qtip({
			  	position: {
	                my: 'bottom center',
	                at: 'top center',
	                adjust: {
			            y: -5
			        }
	            },
	            style: {
        			classes: 'qtipFont qtipCustom qtip-light',
	            	tip: {
	            		width: 22, height: 11, border: 0
	            	}
	            }
			  });
			  $('.iconMore[title]').qtip({
			  	position: {
	                my: 'bottom center',
	                at: 'top center',
	                adjust: {
			            y: -5
			        }
	            },
	            style: {
        			classes: 'qtipFont qtipCustom qtip-light',
	            	tip: {
	            		width: 22, height: 11, border: 0
	            	}
	            },
	            hide: {
			        event: 'click mouseleave'
			    }
			  });
			  $('.fullSize[title]').qtip({
			  		position: {
	                my: 'right center',
	                at: 'left center',
	                adjust: {
			            x: -5
			        }
	            },
	            style: {
        			classes: 'qtipCustom qtipFont qtipCustomWhite qtip-light',
	            	tip: {
	            		width: 22, height: 11
	            	}
	            }
			  });
			  $('.currentTexture, .currentTexture2').each(function(){
			  	$(this).children().qtip({
			  		position: {
	                my: 'bottom center',
	                at: 'top center',
	                adjust: {
			            y: -8
			        }
	            },
	            style: {
        			classes: 'qtipFont qtipCustom qtip-light',
	            	tip: {
	            		width: 22, height: 11, border: 0
	            	}
	            }
			  	});
			  });


			//Доработать значения
			//Зафиксировать панель
			/*$(window).scroll(function(){
				if ($('.panelFloor').hasClass("showContent"))
				{
					height = 400;
				}else{
					height = 100;
				}
				  if($(this).scrollTop() > 600)
				  {
				    //console.log($(this).scrollTop());	
				  	$('.toolbar').addClass("panelFixed");
				  	$('.emptyBlock').addClass("showContent");
				  	$('.emptyBlock').removeClass("hideContent");
				  	$('.emptyBlock').css("height", height);
				  }
				  //= высота - размер картинки
				  if($(this).scrollTop() > 1400|| $(this).scrollTop() < 600)
				  {
				    //console.log($(this).scrollTop());	
				  	$('.toolbar').removeClass("panelFixed");
				  	$('.emptyBlock').removeClass("showContent");
				  	$('.emptyBlock').addClass("hideContent");
				  }
				});*/
			//Сочетание клавиш
			var pressCtrl = false;
			var pressCmd = false;
			$(document).keyup(function(e){
				if(e.which === 17 || e.which === 91){
					pressCtrl = false;
					pressCmd = false;
				}
			});
			$(document).keydown(function(e){
				if(e.which === 17 || e.which === 91){
					pressCtrl = true;
					pressCmd = true;
				}
				console.log(e, pressCtrl, pressCmd);
				if((pressCtrl === true || pressCmd === true) && e.which == 90)
				{
					console.log("Press Cntr+Z");
					$('.repeatPrevClick').click();
					return false;
				}else if((pressCtrl === true || pressCmd === true) && e.which == 89){
					console.log("Press Cntr+Y");
					$('.repeatNextClick').click();
					return false;
				}

			});
			//Панель с полами
			var clickLayers = false;
			$('.layers').click(function(){
				if($('.panelFloor').hasClass("showContent")){
					$('.panelFloor').fadeOut(350);
				}else{
					$('.panelFloor').fadeIn(350);
				}
				$('.panelFloor').toggleClass("showContent");
				clickLayers = true;
			});
			//Закрыть панель с декорами по клику вне его
		    $(document).click(function (e){
		    	if($('.panelFloor').hasClass("showContent") === true && clickLayers === false)
		    	{
		    		
			    		var div = $(".panelFloor"); 
						if (!div.is(e.target) // если клик был не по нашему блоку
						    && div.has(e.target).length === 0) { // и не по его дочерним элементам
								$('.panelFloor').fadeOut(350);
								$('.panelFloor').toggleClass("showContent");
						}
				}
				clickLayers = false;
			});
			//Раскрывающаяся панель с декорами
			$('.iconMore').fancybox();
			/*$('.iconMore').click(function(){
				$('.allTextures').toggleClass("showContent");
				$('.allTextures').css({
					"max-height": $(window).height() - 100
				});
			});*/
			/*$('.currentTexture img').load(function(){
				console.log("textures!!!!!!!!!!!!!");
			});*/
			var bar = new ProgressBar.Circle('#progressbar', {
			  strokeWidth: 10,
			  easing: 'easeInOut',
			  duration: 1000,
			  color: '#483435',
			  trailColor: '#eee',
			  svgStyle: null,
			  step: function(state, circle) {

			    var value = Math.round(circle.value() * 100);
			    if (value === 0) {
			      circle.setText('');
			    } else {
			      circle.setText(value+'%');
			    }

			  }
			});
			bar.text.style.fontSize = '20px';
			bar.text.style.fontWeight = 700;
			bar.animate(0.4);
		});
	</script>
				<div class="windowConstructor">
				<div class="toolbar">
					<div class="panelDecor">

						<div class="repeatBlock">
							<div class="floater">
							<div class="content">
								<div class="repeatPrev repeatPrevClick" title="Отменить">
									<span class="icon-back-arrow"></span>
								</div>
								<div class="repeatNext repeatNextClick" title="Повторить">
									<span class="icon-back-arrow-right"></span>
								</div>
							</div>
							</div>
						</div>
						
						<div class="setTextures">
							<div class="floater">
							<div class="content">
								<div class="arrowPrev">
									<span class="icon-left-arrow"></span>
								</div>
							</div>
							</div>
							<div class="textures">
								
							<div class="currentTexture"><img src="i/decor-1.jpg" title="Декор" width="60px" height="60px" data-id="decor-1"></div>
							<div class="currentTexture"><img src="i/decor-2.jpg" title="Декор" width="60px" height="60px" data-id="decor-2"></div>
							<div class="currentTexture"><img src="i/decor-3.jpg" title="Декор" width="60px" height="60px" data-id="decor-3"></div>
							<div class="currentTexture"><img src="i/decor-4.jpg" title="Декор" width="60px" height="60px" data-id="decor-4"></div>
							<div class="currentTexture"><img src="i/decor-5.jpg" title="Декор" width="60px" height="60px" data-id="decor-5"></div>
							<div class="currentTexture"><img src="i/decor-6.jpg" title="Декор" width="60px" height="60px" data-id="decor-6"></div>
							<div class="currentTexture"><img src="i/decor-7.jpg" title="Декор" width="60px" height="60px" data-id="decor-7"></div>
							<div class="currentTexture"><img src="i/decor-8.jpg" title="Декор" width="60px" height="60px" data-id="decor-8"></div>
							<div class="currentTexture"><img src="i/decor-1.jpg" title="Декор" width="60px" height="60px" data-id="decor-1"></div>
							<div class="currentTexture"><img src="i/decor-2.jpg" title="Декор" width="60px" height="60px" data-id="decor-2"></div>
							<div class="currentTexture"><img src="i/decor-3.jpg" title="Декор" width="60px" height="60px" data-id="decor-3"></div>
							<div class="currentTexture"><img src="i/decor-4.jpg" title="Декор" width="60px" height="60px" data-id="decor-4"></div>
							<div class="currentTexture"><img src="i/decor-5.jpg" title="Декор" width="60px" height="60px" data-id="decor-5"></div>
							<div class="currentTexture"><img src="i/decor-6.jpg" title="Декор" width="60px" height="60px" data-id="decor-6"></div>
							<div class="currentTexture"><img src="i/decor-7.jpg" title="Декор" width="60px" height="60px" data-id="decor-7"></div>
							<div class="currentTexture"><img src="i/decor-8.jpg" title="Декор" width="60px" height="60px" data-id="decor-8"></div>

							</div>

  <script type="text/javascript">
    $(document).ready(function(){
      $('.textures').slick({
      	nextArrow: $('.arrowNext'),
	    prevArrow: $('.arrowPrev'),
	    dots: false,
		infinite: true,
		speed: 300,
		slidesToShow: 8,
		slidesToScroll: 8,
		responsive: [
			    {
			      breakpoint: 1241,
			      settings: {
			        slidesToShow: 6,
			        slidesToScroll: 6
			      }
			    },
			    {
			      breakpoint: 1024,
			      settings: {
			        slidesToShow: 3,
			        slidesToScroll: 3
			      }
			    },
			    {
			    	breakpoint: 768,
			    	settings: {
			    	arrows: false,
			    	speed: 400,
			        slidesToShow: 1,
			        slidesToScroll: 1
			      }
			    }
			    // You can unslick at a given breakpoint now by adding:
			    // settings: "unslick"
			    // instead of a settings object
			  ]
      });
    });
  </script>

							<div class="setTexturesRight">
								<div class="floater">
								<div class="content">
									<div class="arrowNext">
										<span class="icon-right-arrow"></span>
									</div>
									<div class="iconMore" href="#b-popup-decors" title="Все декоры">
										<span class="icon-more" href="#b-popup-decors"></span>
									</div>
								</div>
								</div>
							</div>
						</div>

						<div class="shareBlock">
							<div class="floater">
							<div class="content">
								<div class="layers" title="Оттенок пола">
									<span class="icon-layers"></span>
								</div>
								<div class="share" title="Поделиться">
									<span class="icon-share"></span>
								</div>
							</div>
							</div>
						</div>

					</div>
					
						
				</div>

				<div class="emptyBlock hideContent">
				
				</div>

				<!--<div class="imageRoom">
					<img id="room" src="i/Room.png"  >
				</div>-->
			</div><!--WindowCons-->
		</div><!--b-block-->
		<div class="relBackground">
		<div class="progressbarContain">
			<div id="progressbar">
			</div>
		</div>
		
		<div class="panelFloor">
						<div class="floorIMG" data-src="i/FloorKitchen-1.jpg">
							<svg id="floor1" data-name="Слой 3 + Группа 1 Изображение" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 432">
							<defs>
								<pattern id="floorPattern1" width="100%" height="100%">
							        <image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/FloorKitchen-1.jpg" x="-10" y="-100" width="1000" height="250">
							     	</image>
							    </pattern>
							</defs>
								<polygon fill="url(#floorPattern1)" points="25.7,344.8 540,344.8 579.7,364.7 579.7,434.7 -2.3,434.7 -2.3,405 26,389.8 "/>
							</svg>
							<img src="i/RoomHall.png">
						</div>
						<div class="floorIMG" data-src="i/FloorKitchen-2.jpg">
							<svg id="floor2" data-name="Слой 3 + Группа 1 Изображение" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 432">
							<defs>
								<pattern id="floorPattern2" width="100%" height="100%">
							        <image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/FloorKitchen-2.jpg" x="-10" y="-100" width="1000" height="250">
							     	</image>
							    </pattern>
							</defs>
								<polygon fill="url(#floorPattern2)" points="25.7,344.8 540,344.8 579.7,364.7 579.7,434.7 -2.3,434.7 -2.3,405 26,389.8 "/>
							</svg>
							<img src="i/RoomHall.png">
						</div>
						<div class="floorIMG" data-src="i/FloorKitchen-3.jpg">
							<svg id="floor3" data-name="Слой 3 + Группа 1 Изображение" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 432">
							<defs>
								<pattern id="floorPattern3" width="100%" height="100%">
							        <image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/FloorKitchen-3.jpg" x="-10" y="-100" width="1000" height="250">
							     	</image>
							    </pattern>
							</defs>
								<polygon fill="url(#floorPattern3)" points="25.7,344.8 540,344.8 579.7,364.7 579.7,434.7 -2.3,434.7 -2.3,405 26,389.8 "/>
							</svg>
							<img src="i/RoomHall.png">
						</div>
					</div>
			<div class="fullSize" title="Во всю ширину">
				<span class="icon-full-size"></span>
				<span class="icon-small-size"></span>
			</div>
		<div class="rel" style="display: none" unselectable="on">
		<svg id="roomSVGBack" data-name="Слой 3 + Группа 1 Изображение" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 432">
		
		<title>Гостиная</title>
			<defs>
		<!--Текстуры-->
<pattern id="imageblock1Back" width="100%" height="100%">
			    <image rand-min-x="0" rand-max-x="-50" rand-min-y="-70" rand-max-y="-40" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="0" y="-40" width="100" height="160" transform="rotate(90, 25, 25)">
			    </image>
			</pattern>
			<pattern id="imageblock2Back" width="100%" height="100%">
		       <image rand-min-x="-150" rand-max-x="0" rand-min-y="0" rand-max-y="0"  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-20" y="0" width="200" height="320" transform="scale(0.2, 1)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock3Back" width="100%" height="100%">
		        <image rand-min-x="-150" rand-max-x="0" rand-min-y="0" rand-max-y="0"  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-5" y="0" width="200" height="320">
		     	</image>
		    </pattern>
		    <pattern id="imageblock4Back" width="100%" height="100%">
			    <image rand-min-x="-40" rand-max-x="0" rand-min-y="-40" rand-max-y="0"  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="0" y="0" width="120" height="192">
			    </image>
			</pattern>
			<pattern id="imageblock5Back" width="100%" height="100%">
		        <image rand-min-x="-40" rand-max-x="0" rand-min-y="-80" rand-max-y="0"  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="0" y="0" width="100" height="160">
		     	</image>
		    </pattern>
		    <pattern id="imageblock6Back" width="100%" height="100%">
		        <image rand-min-x="-40" rand-max-x="0" rand-min-y="-80" rand-max-y="0"  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-5" y="-30" width="100" height="160">
		     	</image>
		    </pattern>
		    <pattern id="imageblock7Back" width="100%" height="100%">
		        <image rand-min-x="-40" rand-max-x="0" rand-min-y="-80" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-5" y="-30" width="200" height="320">
		     	</image>
		    </pattern>

		    <pattern id="imageblock8Back" width="100%" height="100%">
		        <image rand-min-x="-150" rand-max-x="0" rand-min-y="-50" rand-max-y="50" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-7" y="0" width="200" height="320" transform="rotate(90, 125, 125)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock9Back" width="100%" height="100%">
		        <image rand-min-x="-70" rand-max-x="0" rand-min-y="0" rand-max-y="20" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-15" y="0" width="100" height="160" transform="rotate(90, 75, 75)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock10Back" width="100%" height="100%">
		        <image rand-min-x="-50" rand-max-x="0" rand-min-y="0" rand-max-y="100" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-3" y="0" width="100" height="160" transform="rotate(90, 75, 75)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock11Back" width="100%" height="100%">
		        <image rand-min-x="-50" rand-max-x="0" rand-min-y="0" rand-max-y="100" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-7" y="0" width="100" height="160" transform="rotate(90, 75, 75)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock12Back" width="100%" height="100%">
		        <image rand-min-x="-100" rand-max-x="0" rand-min-y="-50" rand-max-y="40" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-15" y="0" width="200" height="320" transform="rotate(90, 125, 125)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock13Back" width="100%" height="100%">
		        <image rand-min-x="-100" rand-max-x="0" rand-min-y="-50" rand-max-y="40" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-3" y="0" width="200" height="320" transform="rotate(90, 125, 125)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock14Back" width="100%" height="100%">
		        <image rand-min-x="-120" rand-max-x="0" rand-min-y="-50" rand-max-y="50" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-3" y="0" width="200" height="320" transform="rotate(90, 125, 125)">
		     	</image>
		    </pattern>

		    <pattern id="imageblock15Back" width="100%" height="100%">
		        <image rand-min-x="-100" rand-max-x="0" rand-min-y="-100" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-10" y="0" width="200" height="320">
		     	</image>
		    </pattern>
		    <pattern id="imageblock16Back" width="100%" height="100%">
		        <image rand-min-x="-50" rand-max-x="0" rand-min-y="-50" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-26.5" y="0" width="100" height="160">
		     	</image>
		    </pattern>
		    <pattern id="imageblock17Back" width="100%" height="100%">
		        <image rand-min-x="-80" rand-max-x="0" rand-min-y="0" rand-max-y="50" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-10" y="0" width="100" height="160" transform="rotate(90, 75, 75)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock18Back" width="100%" height="100%">
		        <image rand-min-x="-100" rand-max-x="0" rand-min-y="-70" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-10" y="0" width="200" height="320" transform="scale(0.2, 1)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock19Back" width="100%" height="100%">
		        <image rand-min-x="0" rand-max-x="0" rand-min-y="0" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-26.5" y="0" width="100" height="160">
		     	</image>
		    </pattern>
		    <pattern id="imageblock20Back" width="100%" height="100%">
		        <image rand-min-x="-50" rand-max-x="0" rand-min-y="-100" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-10" y="-100" width="100" height="160">
		     	</image>
		    </pattern>
		    <pattern id="imageblock21Back" width="100%" height="100%">
		        <image rand-min-x="-50" rand-max-x="0" rand-min-y="-80" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-10" y="0" width="100" height="160">
		     	</image>
		    </pattern>

		    <pattern id="floorPatternBack" width="100%" height="100%">
		        <image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/FloorKitchen-2.jpg" x="-10" y="0" width="600" height="120">
		     	</image>
		    </pattern>

<pattern id="imageblock1" width="100%" height="100%">
			    <image rand-min-x="0" rand-max-x="-50" rand-min-y="-70" rand-max-y="-40" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="0" y="-40" width="100" height="160" transform="rotate(90, 25, 25)">
			    </image>
			</pattern>
			<pattern id="imageblock2" width="100%" height="100%">
		       <image rand-min-x="-150" rand-max-x="0" rand-min-y="0" rand-max-y="0"  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-20" y="0" width="200" height="320" transform="scale(0.2, 1)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock3" width="100%" height="100%">
		        <image rand-min-x="-150" rand-max-x="0" rand-min-y="0" rand-max-y="0"  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-5" y="0" width="200" height="320">
		     	</image>
		    </pattern>
		    <pattern id="imageblock4" width="100%" height="100%">
			    <image rand-min-x="-40" rand-max-x="0" rand-min-y="-40" rand-max-y="0"  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="0" y="0" width="120" height="192">
			    </image>
			</pattern>
			<pattern id="imageblock5" width="100%" height="100%">
		        <image rand-min-x="-40" rand-max-x="0" rand-min-y="-80" rand-max-y="0"  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="0" y="0" width="100" height="160">
		     	</image>
		    </pattern>
		    <pattern id="imageblock6" width="100%" height="100%">
		        <image rand-min-x="-40" rand-max-x="0" rand-min-y="-80" rand-max-y="0"  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-5" y="-30" width="100" height="160">
		     	</image>
		    </pattern>
		    <pattern id="imageblock7" width="100%" height="100%">
		        <image rand-min-x="-40" rand-max-x="0" rand-min-y="-80" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-5" y="-30" width="200" height="320">
		     	</image>
		    </pattern>

		    <pattern id="imageblock8" width="100%" height="100%">
		        <image rand-min-x="-150" rand-max-x="0" rand-min-y="-50" rand-max-y="50" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-7" y="0" width="200" height="320" transform="rotate(90, 125, 125)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock9" width="100%" height="100%">
		        <image rand-min-x="-70" rand-max-x="0" rand-min-y="0" rand-max-y="20" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-15" y="0" width="100" height="160" transform="rotate(90, 75, 75)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock10" width="100%" height="100%">
		        <image rand-min-x="-50" rand-max-x="0" rand-min-y="0" rand-max-y="100" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-3" y="0" width="100" height="160" transform="rotate(90, 75, 75)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock11" width="100%" height="100%">
		        <image rand-min-x="-50" rand-max-x="0" rand-min-y="0" rand-max-y="100" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-7" y="0" width="100" height="160" transform="rotate(90, 75, 75)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock12" width="100%" height="100%">
		        <image rand-min-x="-100" rand-max-x="0" rand-min-y="-50" rand-max-y="40" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-15" y="0" width="200" height="320" transform="rotate(90, 125, 125)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock13" width="100%" height="100%">
		        <image rand-min-x="-100" rand-max-x="0" rand-min-y="-50" rand-max-y="40" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-3" y="0" width="200" height="320" transform="rotate(90, 125, 125)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock14" width="100%" height="100%">
		        <image rand-min-x="-120" rand-max-x="0" rand-min-y="-50" rand-max-y="50" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-3" y="0" width="200" height="320" transform="rotate(90, 125, 125)">
		     	</image>
		    </pattern>

		    <pattern id="imageblock15" width="100%" height="100%">
		        <image rand-min-x="-100" rand-max-x="0" rand-min-y="-100" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-10" y="0" width="200" height="320">
		     	</image>
		    </pattern>
		    <pattern id="imageblock16" width="100%" height="100%">
		        <image rand-min-x="-50" rand-max-x="0" rand-min-y="-50" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-26.5" y="0" width="100" height="160">
		     	</image>
		    </pattern>
		    <pattern id="imageblock17" width="100%" height="100%">
		        <image rand-min-x="-80" rand-max-x="0" rand-min-y="0" rand-max-y="50" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-10" y="0" width="100" height="160" transform="rotate(90, 75, 75)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock18" width="100%" height="100%">
		        <image rand-min-x="-100" rand-max-x="0" rand-min-y="-70" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-10" y="0" width="200" height="320" transform="scale(0.2, 1)">
		     	</image>
		    </pattern>
		    <pattern id="imageblock19" width="100%" height="100%">
		        <image rand-min-x="0" rand-max-x="0" rand-min-y="0" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-26.5" y="0" width="100" height="160">
		     	</image>
		    </pattern>
		    <pattern id="imageblock20" width="100%" height="100%">
		        <image rand-min-x="-50" rand-max-x="0" rand-min-y="-100" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-10" y="-100" width="100" height="160">
		     	</image>
		    </pattern>
		    <pattern id="imageblock21" width="100%" height="100%">
		        <image rand-min-x="-50" rand-max-x="0" rand-min-y="-80" rand-max-y="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/decor-2.jpg" x="-10" y="0" width="100" height="160">
		     	</image>
		    </pattern>

		    <pattern id="floorPattern" width="100%" height="100%">
		        <image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="i/FloorKitchen-2.jpg" x="-10" y="0" width="600" height="120">
		     	</image>
		    </pattern>
		 </defs>

		<polygon class="classSVGback" id="block1Back" fill="url(#imageblock1Back)" points="65.3,85.2 93,89.3 145,89.3 145,74.4 65.3,74.4 "/>
		<polygon class="classSVGback" id="block2Back" fill="url(#imageblock2Back)" points="145,344.8 154,335.7 154,296.1 155,296 155.1,295.3 155.2,85.6 145,75.2 "/>
		<polygon class="classSVGback" id="block3Back" fill="url(#imageblock3Back)" points="65.5,85.2 93,89.3 93,89.3 93,344.8 65.5,344.8 "/>
		<rect x="93" y="130.3" class="classSVGback" id="block4Back" fill="url(#imageblock4Back)" width="50.5" height="143.7"/>
		<rect x="93" y="89.3" class="classSVGback" id="block5Back" fill="url(#imageblock5Back)" width="52" height="41"/>
		<rect x="93" y="274" class="classSVGback" id="block6Back" fill="url(#imageblock6Back)" width="52" height="70.8"/>
		<rect x="143.5" y="130.3" class="classSVGback" id="block7Back" fill="url(#imageblock7Back)" width="1.5" height="143.7"/>

		<rect x="162.7" y="148" class="classSVGback" id="block8Back" fill="url(#imageblock8Back)"  width="190.3" height="33.7"/>
		<rect x="193.8" y="320.6" class="classSVGback" id="block9Back" fill="url(#imageblock9Back)"  width="125.5" height="23.3"/>
		<path class="classSVGback" id="block10Back" fill="url(#imageblock10Back)"  d="M319.3,308.7c0.2,0,40-5.8,40-5.8v41h-40V308.7z"/>
		<path class="classSVGback" id="block11Back" fill="url(#imageblock11Back)" d="M193.8,308.7c-0.2,0-40-5.8-40-5.8v41h40V308.7z"/>
		<polygon class="classSVGback" id="block12Back" fill="url(#imageblock12Back)" points="359.3,296.2 154,296.1 155,296 155.1,295.3 163.5,290.2 354.2,290.2 "/>
		<polygon class="classSVGback" id="block13Back" fill="url(#imageblock13Back)" points="359.3,296.2 359.3,302.9 319.3,308.7 193.8,308.7 154,302.9 154,296.1 "/>
		<polygon class="classSVGback" id="block14Back" fill="url(#imageblock14Back)" points="352.1,233.8 161.3,233.8 155.6,235.3 155.6,240.2 356.6,240.2 356.6,235.3 "/>

		<polygon class="classSVGback" id="block15Back" fill="url(#imageblock15Back)" points="451.7,125.4 415.4,129.5 415.4,343.9 451.7,343.9 "/>
		<rect x="374" y="170.4" class="classSVGback" id="block16Back" fill="url(#imageblock16Back)" width="41.4" height="103.6"/>
		<polygon class="classSVGback" id="block17Back" fill="url(#imageblock17Back)" points="451.7,125.4 451.7,115.6 372.2,115.6 372.2,129.2 415.4,129.5 "/>
		<polygon class="classSVGback" id="block18Back" fill="url(#imageblock18Back)" points="372.2,115.6 365.8,123.4 365.8,334.5 372.2,344.8 "/>
		<rect x="372.2" y="170.4" class="classSVGback" id="block19Back" fill="url(#imageblock19Back)" width="1.8" height="103.6"/>
		<polygon class="classSVGback" id="block20Back" fill="url(#imageblock20Back)" points="415.4,129.5 372.2,129.2 372.2,170.4 415.4,170.4 "/>
		<rect x="372.2" y="274" class="classSVGback" id="block21Back" fill="url(#imageblock21Back)" width="43.2" height="69.9"/>

		<polygon class="classSVGback" id="floorBack" fill="url(#floorPatternBack)" points="25.7,344.8 540,344.8 579.7,364.7 579.7,434.7 -2.3,434.7 -2.3,405 26,389.8 "/>

	</svg>

<!--Это задний слой - он и будет изменяться-->
	<svg id="roomSVG" data-name="Слой 3 + Группа 1 Изображение" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 432">
		
		<title>Гостиная</title>

		 <defs>
		 	
		 	<clipPath id="clipping1">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping2">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping3">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping4">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping5">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping6">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping7">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>

			<clipPath id="clipping8">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping9">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping10">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping11">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping12">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping13">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping14">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>

			<clipPath id="clipping15">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping16">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping17">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping18">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping19">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping20">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>
			<clipPath id="clipping21">
			     <circle cx="300" cy="150" r="50"/>
			</clipPath>

		 </defs>

		<polygon class="classSVG default" id="block1" fill="url(#imageblock1)" points="65.3,85.2 93,89.3 145,89.3 145,74.4 65.3,74.4 "/>
		<polygon class="classSVG default" data-connect="3" id="block2" fill="url(#imageblock2)" points="145,344.8 154,335.7 154,296.1 155,296 155.1,295.3 155.2,85.6 145,75.2 "/>
		<polygon class="classSVG default" id="block3" fill="url(#imageblock3)" points="65.5,85.2 93,89.3 93,89.3 93,344.8 65.5,344.8 "/>
		<rect x="93" y="130.3" class="classSVG default" data-connect="3" id="block4" fill="url(#imageblock4)" width="50.5" height="143.7"/>
		<rect x="93" y="89.3" class="classSVG default" id="block5" fill="url(#imageblock5)" width="52" height="41"/>
		<rect x="93" y="274" class="classSVG default" id="block6" fill="url(#imageblock6)" width="52" height="70.8"/>
		<rect x="143.5" y="130.3" class="classSVG default" data-connect="3" id="block7" fill="url(#imageblock7)" width="1.5" height="143.7"/>

		<rect x="162.7" y="148" class="classSVG default" id="block8" fill="url(#imageblock8)"  width="190.3" height="33.7"/>
		<rect x="193.8" y="320.6" class="classSVG default" id="block9" fill="url(#imageblock9)"  width="125.5" height="23.3"/>
		<path class="classSVG default" id="block10" fill="url(#imageblock10)"  d="M319.3,308.7c0.2,0,40-5.8,40-5.8v41h-40V308.7z"/>
		<path class="classSVG default" id="block11" fill="url(#imageblock11)" d="M193.8,308.7c-0.2,0-40-5.8-40-5.8v41h40V308.7z"/>
		<polygon class="classSVG default" data-connect="2" id="block12" fill="url(#imageblock12)" points="359.3,296.2 154,296.1 155,296 155.1,295.3 163.5,290.2 354.2,290.2 "/>
		<polygon class="classSVG default" data-connect="2" id="block13" fill="url(#imageblock13)" points="359.3,296.2 359.3,302.9 319.3,308.7 193.8,308.7 154,302.9 154,296.1 "/>
		<polygon class="classSVG default" id="block14" fill="url(#imageblock14)" points="352.1,233.8 161.3,233.8 155.6,235.3 155.6,240.2 356.6,240.2 356.6,235.3 "/>

		<polygon class="classSVG default" id="block15" fill="url(#imageblock15)" points="451.7,125.4 415.4,129.5 415.4,343.9 451.7,343.9 "/>
		<rect x="374" y="170.4" class="classSVG default" data-connect="3" id="block16" fill="url(#imageblock16)" width="41.4" height="103.6"/>
		<polygon class="classSVG default" id="block17" fill="url(#imageblock17)" points="451.7,125.4 451.7,115.6 372.2,115.6 372.2,129.2 415.4,129.5 "/>
		<polygon class="classSVG default" data-connect="3" id="block18" fill="url(#imageblock18)" points="372.2,115.6 365.8,123.4 365.8,334.5 372.2,344.8 "/>
		<rect x="372.2" y="170.4" class="classSVG default" data-connect="3" id="block19" fill="url(#imageblock19)" width="1.8" height="103.6"/>
		<polygon class="classSVG default" id="block20" fill="url(#imageblock20)" points="415.4,129.5 372.2,129.2 372.2,170.4 415.4,170.4 "/>
		<rect x="372.2" y="274" class="classSVG default" id="block21" fill="url(#imageblock21)" width="43.2" height="69.9"/>

		<polygon class="classSVG" id="floor" fill="url(#floorPattern)" points="25.7,344.8 540,344.8 579.7,364.7 579.7,434.7 -2.3,434.7 -2.3,405 26,389.8 "/>

	</svg>

	<img id="room" src="i/RoomHall.png">

<!--Это передний слой - он отслеживает клики и меняет задний слой-->
	<svg id="roomSVGFront" data-name="Слой 3 + Группа 1 Изображение" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 432">
		
		<title>Гостиная</title>

		<polygon class="classSVGFront" id="block1Front" data-id="block1" points="65.3,85.2 93,89.3 145,89.3 145,74.4 65.3,74.4 "/>
		<polygon class="classSVGFront" id="block2Front" data-id="block2" points="145,344.8 154,335.7 154,296.1 155,296 155.1,295.3 155.2,85.6 145,75.2 "/>
		<polygon class="classSVGFront" id="block3Front" data-id="block3" points="65.5,85.2 93,89.3 93,89.3 93,344.8 65.5,344.8 "/>
		<rect x="93" y="130.3" class="classSVGFront" id="block4Front" data-id="block4" width="50.5" height="143.7"/>
		<rect x="93" y="89.3" class="classSVGFront" id="block5Front" data-id="block5" width="52" height="41"/>
		<rect x="93" y="274" class="classSVGFront" id="block6Front" data-id="block6" width="52" height="70.8"/>
		<rect x="143.5" y="130.3" class="classSVGFront" id="block7Front" data-id="block7" width="1.5" height="143.7"/>

		<rect x="162.7" y="148" class="classSVGFront" id="block8Front" data-id="block8" width="190.3" height="33.7"/>
		<rect x="193.8" y="320.6" class="classSVGFront" id="block9Front" data-id="block9" width="125.5" height="23.3"/>
		<path class="classSVGFront" id="block10Front" data-id="block10" d="M319.3,308.7c0.2,0,40-5.8,40-5.8v41h-40V308.7z"/>
		<path class="classSVGFront" id="block11Front" data-id="block11" d="M193.8,308.7c-0.2,0-40-5.8-40-5.8v41h40V308.7z"/>
		<polygon class="classSVGFront" id="block12Front" data-id="block12" points="359.3,296.2 154,296.1 155,296 155.1,295.3 163.5,290.2 354.2,290.2 "/>
		<polygon class="classSVGFront" id="block13Front" data-id="block13" points="359.3,296.2 359.3,302.9 319.3,308.7 193.8,308.7 154,302.9 154,296.1 "/>
		<polygon class="classSVGFront" id="block14Front" data-id="block14" points="352.1,233.8 161.3,233.8 155.6,235.3 155.6,240.2 356.6,240.2 356.6,235.3 "/>

		<polygon class="classSVGFront" id="block15Front" data-id="block15" points="451.7,125.4 415.4,129.5 415.4,343.9 451.7,343.9 "/>
		<rect x="374" y="170.4" class="classSVGFront" id="block16Front" data-id="block16" width="41.4" height="103.6"/>
		<polygon class="classSVGFront" id="block17Front" data-id="block17" points="451.7,125.4 451.7,115.6 372.2,115.6 372.2,129.2 415.4,129.5 "/>
		<polygon class="classSVGFront" id="block18Front" data-id="block18" points="372.2,115.6 365.8,123.4 365.8,334.5 372.2,344.8 "/>
		<rect x="372.2" y="170.4" class="classSVGFront" id="block19Front" data-id="block19" width="1.8" height="103.6"/>
		<polygon class="classSVGFront" id="block20Front" data-id="block20" points="415.4,129.5 372.2,129.2 372.2,170.4 415.4,170.4 "/>
		<rect x="372.2" y="274" class="classSVGFront" id="block21Front" data-id="block21" width="43.2" height="69.9"/>

		<polygon class="classSVGFront" id="floorF" points="25.7,344.8 540,344.8 579.7,364.7 579.7,434.7 -2.3,434.7 -2.3,405 26,389.8 "/>
	</svg>

	<div id="default-hash" data-hash="2|1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2" data-countSVG="22" data-countTextures="3"></div>

	<script type="text/javascript">
		var urlCommands = (function () {
		var self = this;
		this.hash = "";
		this.commands = {};
		this.floor = "";
		this.events = {};
		this.default = {};
		this.countSVG = $('#default-hash').attr("data-countSVG");
		this.countTextures = $('#default-hash').attr("data-countTextures");

		$(window).bind('hashchange', function() {
			self.parse();
			//this.urlUpdate();
		});

		this.init = function() {
				if($('.panelFloor').length)
				{
					var parseFloor = $('#floorPattern').children().attr("xlink:href").split(/(\d)/);
					this.floor = parseFloor[1];
				}
				for(var i=0; i < +this.countSVG - 1; i++)
				{
					var parseTexture = $('#imageblock'+(+i+1)).children().attr("xlink:href").split(/(\d)/);
					this.commands[i] = parseTexture[1];
					this.default[i] = parseTexture[1];
				}
			this.urlUpdate();
		}

		this.parse = function() {
			console.log("+++++++");
			this.hash = window.location.hash;
			this.commands = {};
			if( ~self.hash.indexOf('#') ) {
				var data = self.hash;
				data = data.replace('#','');
				if(~data.indexOf('|')){
					var checkFloor = data.split('|');
					$('#floorPattern, #floorPatternBack').children().attr("xlink:href", "i/FloorKitchen-"+checkFloor[0]+".jpg");
					data = checkFloor[1];
					this.floor = checkFloor[0];
					console.log(checkFloor);
				}
				var data = data.split(',');
				if(this.countSVG - 1 === data.length)
				{
				this.commands = data;
					for (var i in data) {
						if(+data[i] > 0 && +data[i] < +this.countTextures)
						{
							$('#imageblock'+(+i+1)+', #imageblock'+(+i+1)+'Back').children().attr("xlink:href", "i/decor-"+data[i]+".jpg");
						}else{
							console.log(this.default[i]);
							//брать дефолтный
							$('#imageblock'+(+i+1)+', #imageblock'+(+i+1)+'Back').children().attr("xlink:href", "i/decor-"+this.default[i]+".jpg");
							this.commands[i] = this.default[i];
							this.urlUpdate();
						}
					}
				}else{
					this.init();
				}
			}
			return this;
		}
		/*this.valid = function(){

		}*/

		this.urlPush = function(position, texture) {
			self.commands[position] = texture;
			//console.log(self.commands);
		}
		this.urlPushFloor = function(texture) {
			this.floor = texture;
		}
		this.urlUpdate = function(){
			var url = '#';
			if(this.floor != "")
			{
				url += this.floor+'|'
			}
			for (var i in self.commands)
			{
				url += self.commands[i]+',';
			}
			url = url.slice(0,-1);
			this.hash = url;
			window.history.pushState(null, null, url);
			console.log(window.history.length, window.history.state);
			}

		this.parse();
		return this;
	})();


    	$(document).ready(function()
    	{
    		var shiftSlider;//менять в зависимости от ширины окна
			var currentTexture;
			var prevTexture;
			urlCommands.init();
			$(window).resize(function(){
				if(window.innerWidth >= 1240){
					shiftSlider = 8;
				}
				if(window.innerWidth < 1240 && window.innerWidth > 1024){
					shiftSlider = 6;
				}
				if(window.innerWidth <= 1024 && window.innerWidth > 768){
					shiftSlider = 3;
				}
				if(window.innerWidth <= 768){
					shiftSlider = 1;
				}
			});
			//Выбор текстуры
			$('.currentTexture').click(function(e){
				if (prevTexture != undefined)
					prevTexture.children().css("box-shadow", "");
				currentTexture = $(this);
				prevTexture = $(this);
				$(this).children().css({
					"box-shadow": "0 0 0 3px #483434",
					"box-sizing": "border-box"
				});
				if(window.innerWidth <= 768){
					$('.iconMore').click();
				}
			});
			$('.currentTexture2').click(function(e){
		        e.preventDefault();
		        slideIndex = $(this).index();
		        $('.textures').slick('slickGoTo', parseInt(slideIndex), false);
		        console.log("currentTexture",$('.currentTexture').eq(slideIndex), "slideIndex", slideIndex, "this", $(this));
		        $('.currentTexture').eq(slideIndex + shiftSlider).click();
		        $('.allTextures').removeClass("showContent");
		        $.fancybox.close();
		    });

			//Выбор пола
			$('.floorIMG').click(function(e){
				var currentFloor = $(this);
				$('#floorPatternBack').children().attr("xlink:href", currentFloor.attr("data-src"));
				$('#floor').animate({
				    opacity: 0
				  },
				  {
					duration: 600,
					complete: function(){
						$('#floorPattern').children().attr("xlink:href", currentFloor.attr("data-src"));
						$('#floor').css("opacity", 1);
					}
					});
				var pushFloor = currentFloor.attr("data-src").split(/(\d)/);
				urlCommands.urlPushFloor(pushFloor[1]);
				urlCommands.urlUpdate();
				$('.layers').click();
			});
			
			//Отменить/Повторить
			var stack = [];
			//Заполняем стек начальными текстурами
			$('.default').each(function(){
				var stackAdd = new clickArea($(this).attr("id"), $('#image'+$(this).attr("id")).children().attr("xlink:href"));
				stack.push(stackAdd);
			});
			var stackRepeat = [];
			var stackCancel = false;
			var checkConnectPrev = false;
			var checkConnectPrevThree = 0;
			var checkConnectNext = false;
			var checkConnectNextThree = 0;
			//Отменить
			$('.repeatPrevClick').click(function(e){
				if(stack.length != 0)
				{
					var lastElemStack = stack.pop();
					var prevElemStack;
					stack.forEach(function(item, i, stack){
						if(item.path === lastElemStack.path)
						{
							prevElemStack = item;
						}
					});
					if(prevElemStack != undefined)
						{
							console.log("stack", stack);
							//теперь нужно поменять текстуры
							/*$('#'+lastElemStack.path).css({"fill":prevElemStack.texture});
							$('#'+lastElemStack.path+'Back').css({"fill":prevElemStack.texture});*/
							$('#image'+lastElemStack.path).children().attr("xlink:href", prevElemStack.texture);
							$('#image'+lastElemStack.path+'Back').children().attr("xlink:href", prevElemStack.texture);
							var positionElStack = lastElemStack.path.slice(5) - 1;
							var textureElStack = prevElemStack.texture.split(/(\d)/);
							urlCommands.urlPush(positionElStack, textureElStack[1]);
							urlCommands.urlUpdate();
							stackCancel = true;
							console.log($('#'+prevElemStack.path).attr("data-connect"));
							if($('#'+prevElemStack.path).attr("data-connect") === "2" && checkConnectPrev === false){
								checkConnectPrev = true;
								$('.repeatPrevClick').click();
							}
							if($('#'+prevElemStack.path).attr("data-connect") === "3" && checkConnectPrevThree < 2){
								checkConnectPrevThree++;
								console.log(checkConnectPrevThree);
								$('.repeatPrevClick').click();
							}
							stackRepeat.push(lastElemStack);
						}
					else{
						stack.push(lastElemStack);
					}
					if(stack.length > 21)
					{
						$('.repeatPrev').removeClass('repeatPrev').addClass('repeatPrev2');
						
					}else{
						$('.repeatPrev2').removeClass('repeatPrev2').addClass('repeatPrev');
						
					}
					if(stackRepeat.length > 0)
					{
						$('.repeatNext').removeClass('repeatNext').addClass('repeatNext2');
					}
					else{
						$('.repeatNext2').removeClass('repeatNext2').addClass('repeatNext');
					}
					checkConnectPrev = false;
					checkConnectPrevThree = 0;
				}
			});

			//Повторить
			$('.repeatNextClick').click(function(e){
				if(stackRepeat.length != 0){
					console.log("stackRepeat", stackRepeat);
					var lastElemStackRepeat= stackRepeat.pop();
					/*$('#'+lastElemStackRepeat.path).css({"fill":lastElemStackRepeat.texture});
					$('#'+lastElemStackRepeat.path+'Back').css({"fill":lastElemStackRepeat.texture});*/
					$('#image'+lastElemStackRepeat.path).children().attr("xlink:href", lastElemStackRepeat.texture);
					$('#image'+lastElemStackRepeat.path+'Back').children().attr("xlink:href", lastElemStackRepeat.texture);
					var positionElStackR = lastElemStackRepeat.path.slice(5) - 1;
					var textureElStackR = lastElemStackRepeat.texture.split(/(\d)/);
					urlCommands.urlPush(positionElStackR, textureElStackR[1]);
					urlCommands.urlUpdate();
					stack.push(lastElemStackRepeat);
					$(this).removeClass('repeatNext').addClass('repeatNext2');
					if($('#'+lastElemStackRepeat.path).attr("data-connect") === "2" && checkConnectNext === false){
							checkConnectNext = true;
							$('.repeatNextClick').click();
					}
					if($('#'+lastElemStackRepeat.path).attr("data-connect") === "3" && checkConnectNextThree < 2){
							checkConnectNextThree++;
							$('.repeatNextClick').click();
					}
					checkConnectNext = false;
					checkConnectNextThree = 0;
				}
				else{
					$(this).removeClass('repeatNext2').addClass('repeatNext');
				}
			});

			//Анимация
			function areaSVG(path, circle, radius){

			   this.path = path;
			   this.circle = circle;
			   this.radius = radius;
			   this.animateSVG = function(x, y, clickEl, currentTextureLoc){
			   	circle.attr({
				  	'cx': x + '%',
				  	'cy': y + '%'
				});
				var circleID = circle.parent().attr("id");
				path.css({
				  	"clip-path":"url(#"+circleID+")",
				  	"opacity" : "1"
				  });
				circle.css({
				  	'r': 0
				 });
				//Изменение хэша
				var positionEl = clickEl.slice(5) - 1; // из block12 получаем 12
					var textureEl = currentTextureLoc.children().attr("src").split(/(\d)/);
					urlCommands.urlPush(positionEl, textureEl[1]);
					urlCommands.urlUpdate();
				circle.animate(
					  {
					  	'r': radius
					  },{
					  		duration: 550,
					   		step: function(now, fx) {
					   			$(this).attr({"r": now});
					   			if(stackCancel === true){
					   				$('#image'+clickEl).children().attr({
										"x": tempX,
										"y": tempY
									});
									return
					   			}
					   		},
					   		complete: function(){
					   			console.log(stackCancel);
					   			if(stackCancel === false){
						   			$('#image'+clickEl+'Back').children().attr({
						   				"xlink:href": currentTextureLoc.children().attr("src"),
										"x": $('#image'+clickEl).children().attr("x"),
										"y": $('#image'+clickEl).children().attr("y")
									});
								stackCancel = false;
						   		}
					   		}
					  });

			   };
			};

			//Объект SVG + текстура (для отменить/повторить)
			function clickArea(path, texture)
			{
				this.path = path;
				this.texture = texture;
			}

			/* --------------------------- */
			var block1 = new areaSVG($('#block1'), $('#clipping1 circle'), 80);
			var block2 = new areaSVG($('#block2'), $('#clipping2 circle'), 260);
			var block3 = new areaSVG($('#block3'), $('#clipping3 circle'), 260);
			var block4 = new areaSVG($('#block4'), $('#clipping4 circle'), 260);
			var block5 = new areaSVG($('#block5'), $('#clipping5 circle'), 80);
			var block6 = new areaSVG($('#block6'), $('#clipping6 circle'), 100);
			var block7 = new areaSVG($('#block7'), $('#clipping7 circle'), 260);

			var block8 = new areaSVG($('#block8'), $('#clipping8 circle'), 220);
			var block9 = new areaSVG($('#block9'), $('#clipping9 circle'), 150);
			var block10 = new areaSVG($('#block10'), $('#clipping10 circle'), 70);
			var block11 = new areaSVG($('#block11'), $('#clipping11 circle'), 70);
			var block12 = new areaSVG($('#block12'), $('#clipping12 circle'), 220);
			var block13 = new areaSVG($('#block13'), $('#clipping13 circle'), 220);
			var block14 = new areaSVG($('#block14'), $('#clipping14 circle'), 220);

			var block15 = new areaSVG($('#block15'), $('#clipping15 circle'), 250);
			var block16 = new areaSVG($('#block16'), $('#clipping16 circle'), 250);
			var block17 = new areaSVG($('#block17'), $('#clipping17 circle'), 80);
			var block18 = new areaSVG($('#block18'), $('#clipping18 circle'), 250);
			var block19 = new areaSVG($('#block19'), $('#clipping19 circle'), 250);
			var block20 = new areaSVG($('#block20'), $('#clipping20 circle'), 90);
			var block21 = new areaSVG($('#block21'), $('#clipping21 circle'), 90);

			var clickElem;
	    	var offset;
	    	var parent;
	    	var tempX;
	    	var tempY;

			//Кликнули по любой области SVG
			$('.classSVGFront').click(function(e){
				clickElem = $(this).attr("data-id");//block1
				if(currentTexture != undefined && currentTexture.children().attr("src") != $('#image'+clickElem).children().attr("xlink:href"))
				{
					//Получаем элемент из центрального слоя
					
					// = $(this).attr("data-location");//Up
					//$('#'+clickElem).css({"fill": "url(#image"+clickElem+")"});
					//закинуть текущую текстуру в pattern
					$('#image'+clickElem).children().attr("xlink:href", currentTexture.children().attr("src"));
					console.log("#image", $('#image'+clickElem));
					offset = $(this).position();
				    parent = $('.rel').offset();

				    var relativeX = (offset.left - parent.left) / $('#room').width() * 100+ ((e.pageX / $('#room').width() * 100) - (offset.left / $('#room').width() * 100));
				    var relativeY = ((offset.top - parent.top) / $('#room').height()) * 100+ ((e.pageY / $('#room').height() * 100) - (offset.top / $('#room').height() * 100));

				    //Добавить текущий SVG и текстуру в стек
				    //var stackObj = new clickArea(clickElem, "url(#" + currentTexture.children().attr("src") +  + ")");
				    /*var stackObj = new clickArea(clickElem, $('#image'+clickElem).children().attr("xlink:href"));
				    console.log(stack);*/
				    //if(stackObj.path != stack[stack.length - 1].path || stackObj.texture != stack[stack.length - 1].texture)

				    //искать в стеке такое же сочетание path+texture
				    var elemRepeat = false;
				    /*stack.forEach(function(item, i, stack){
				    	if(stackObj.path === item.path && stackObj.texture === item.texture)
				    	{
				    		elemRepeat = true;
				    	}
				    })
				    if(elemRepeat === false)
				    {
				    	console.log("add!");
				    	stack.push(stackObj);
				    }*/
				    var stackObj = new clickArea(clickElem, $('#image'+clickElem).children().attr("xlink:href"));
					stack.push(stackObj);
					console.log(stack);
				    if(stack.length > 21){//Если с анимацией пола то 22
						$('.repeatPrev').removeClass('repeatPrev').addClass('repeatPrev2');
					}else{
						$('.repeatPrev2').removeClass('repeatPrev2').addClass('repeatPrev');
					}
					stackRepeat = [];
					$('.repeatNext2').removeClass('repeatNext2').addClass('repeatNext');
					//сохраняем старые координаты перед закраской
					tempX = $('#image'+clickElem).children().attr("x");
					tempY = $('#image'+clickElem).children().attr("y");
					//Рандомная закраска
					var randX = Math.floor(Math.random() * ($('#image'+clickElem).children().attr("rand-max-x") - $('#image'+clickElem).children().attr("rand-min-x") + 1 )) + +$('#image'+clickElem).children().attr("rand-min-x");
					var randY = Math.floor(Math.random() * ($('#image'+clickElem).children().attr("rand-max-y") - $('#image'+clickElem).children().attr("rand-min-y") + 1 )) + +$('#image'+clickElem).children().attr("rand-min-y");
					$('#image'+clickElem).children().attr({
						"x": randX,
						"y": randY
					});
					stackCancel = false;
					switch(clickElem){
						case "block1":
							block1.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							break
						case "block2":
							block2.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							$('#imageblock7, #imageblock4').children().attr("xlink:href", currentTexture.children().attr("src"));
							block7.animateSVG(relativeX, relativeY, "block7", currentTexture);
							stack.push(new clickArea("block7", $('#imageblock7').children().attr("xlink:href")));
							block4.animateSVG(relativeX, relativeY, "block4", currentTexture);
							stack.push(new clickArea("block4", $('#imageblock4').children().attr("xlink:href")));
							break
						case "block3":
							block3.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							break
						case "block4":
							block4.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							$('#imageblock2, #imageblock7').children().attr("xlink:href", currentTexture.children().attr("src"));
							block2.animateSVG(relativeX, relativeY, "block2", currentTexture);
							stack.push(new clickArea("block2", $('#imageblock2').children().attr("xlink:href")));
							block7.animateSVG(relativeX, relativeY, "block7", currentTexture);
							stack.push(new clickArea("block7", $('#imageblock7').children().attr("xlink:href")));
							break
						case "block5":
							block5.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							break
						case "block6":
							block6.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							break
						case "block7":
							block7.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							$('#imageblock2, #imageblock4').children().attr("xlink:href", currentTexture.children().attr("src"));
							block2.animateSVG(relativeX, relativeY, "block2", currentTexture);
							stack.push(new clickArea("block2", $('#imageblock2').children().attr("xlink:href")));
							block4.animateSVG(relativeX, relativeY, "block4", currentTexture);
							stack.push(new clickArea("block4", $('#imageblock4').children().attr("xlink:href")));
							break
						case "block8":
							block8.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							break
						case "block9":
							block9.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							break
						case "block10":
							block10.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							break
						case "block11":
							block11.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							break
						case "block12":
							block12.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							$('#imageblock13').children().attr("xlink:href", currentTexture.children().attr("src"));
							block13.animateSVG(relativeX, relativeY, "block13", currentTexture);
							stack.push(new clickArea("block13", $('#imageblock13').children().attr("xlink:href")));
							break
						case "block13":
							block13.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							$('#imageblock12').children().attr("xlink:href", currentTexture.children().attr("src"));
							block12.animateSVG(relativeX, relativeY, "block12", currentTexture);
							stack.push(new clickArea("block12", $('#imageblock12').children().attr("xlink:href")));
							break
						case "block14":
							block14.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							break
						case "block15":
							block15.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							break
						case "block16":
							block16.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							$('#imageblock18, #imageblock19').children().attr("xlink:href", currentTexture.children().attr("src"));
							block18.animateSVG(relativeX, relativeY, "block18", currentTexture);
							stack.push(new clickArea("block18", $('#imageblock18').children().attr("xlink:href")));
							block19.animateSVG(relativeX, relativeY, "block19", currentTexture);
							stack.push(new clickArea("block19", $('#imageblock19').children().attr("xlink:href")));
							break
						case "block17":
							block17.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							break
						case "block18":
							block18.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							$('#imageblock19, #imageblock16').children().attr("xlink:href", currentTexture.children().attr("src"));
							block19.animateSVG(relativeX, relativeY, "block19", currentTexture);
							stack.push(new clickArea("block19", $('#imageblock19').children().attr("xlink:href")));
							block16.animateSVG(relativeX, relativeY, "block16", currentTexture);
							stack.push(new clickArea("block16", $('#imageblock16').children().attr("xlink:href")));

							break
						case "block19":
							block19.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							$('#imageblock16, #imageblock18').children().attr("xlink:href", currentTexture.children().attr("src"));
							block16.animateSVG(relativeX, relativeY, "block16", currentTexture);
							stack.push(new clickArea("block16", $('#imageblock16').children().attr("xlink:href")));
							block18.animateSVG(relativeX, relativeY, "block18", currentTexture);
							stack.push(new clickArea("block18", $('#imageblock18').children().attr("xlink:href")));
							break
						case "block20":
							block20.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							break
						case "block21":
							block21.animateSVG(relativeX, relativeY, clickElem, currentTexture);
							break
					}
				}

			});
		});
    	</script>
			</div><!--rel-->
			</div>
		</div><!--b-wide-->
	</div><!--b-content-->
	<div class="b b-main-footer">
		<div class="b-wide-block">
			<div class="b-block b-block-one clearfix">
				<div class="b-col left">
					<h3>О компании</h3>
					<ul>
						<li><a href="#">Новости</a></li>
						<li><a href="#">История</a></li>
						<li><a href="#">Вакансии</a></li>
					</ul>
				</div>
				<div class="b-col left">
					<h3>Продукция</h3>
					<ul>
						<li><a href="#">ЛДСП</a></li>
						<li><a href="#">ДСП</a></li>
						<li><a href="#">Пиломатериал</a></li>
						<li><a href="#">Кромка</a></li>
					</ul>
				</div>
				<div class="b-col left">
					<h3>Производство</h3>
					<ul>
						<li><a href="#">Переработка древесины</a></li>
						<li><a href="#">Производство ДСП</a></li>
						<li><a href="#">Ламинирование ДСП</a></li>
						<li><a href="#">Импрегнирование бумаги</a></li>
					</ul>
				</div>
				<div class="b-col left">
					<h3>Адрес</h3>
					<p>634024, г. Томск, 2-ой поселок ЛПК, д. 109/3, оф. 43</p>
				</div>
				<div class="b-col left">
					<h3>Отдел кадров</h3>
					<p>Тел.: (3822) 70-67-23<br>Тел.: (3822) 70-67-27 Доб. 1305<br>E-mail: ShustrovaN@tomlesdrev.ru</p>
					<h3>Отдел сбыта</h3>
					<p>Тел.: (3822) 28-33-48</p>
				</div>
			</div>
			<div class="b-block b-block-two clearfix">
				<p class="left">ООО «Томлесдрев», все права защищены © 2016</p>
				<a href="#" class="b-copyright right"></a>
			</div>
		</div>
	</div>
	<div class="b-menu-overlay">
		<div class="b-wide-block"></div>
	</div>
	<div class="b-search-overlay"></div>
	<div class="b-search-form">
		<h2>Поиск по сайту</h2>
		<form action="" id="b-search-form">
			<div class="b-search-input clearfix">
				<span class="icon icon-search left"></span>
				<input type="text" placeholder="Начните вводить запрос">
				<a href="#" class="icon icon-arrow-right right" onclick="$('#b-search-form').submit(); return false;"></a>
			</div>
		</form>
	</div>
	<div style="display:none;">
		<div id="b-popup-1">
			<div class="b-popup" >
				<h3>Оставьте заявку</h3>
				<h4>и наши специалисты<br>свяжутся с Вами в ближайшее время</h4>
				<form action="kitsend.php" method="POST" id="b-form-1" data-block="#b-popup-2">
					<div class="b-popup-form">
						<label for="name">Введите Ваше имя</label>
						<input type="text" id="name" name="name" required/>
						<label for="tel">Введите Ваш номер телефона</label>
						<input type="text" id="tel" name="phone" required/>
						<label for="tel">Введите Ваш E-mail</label>
						<input type="text" id="tel" name="email" required/>
						<input type="hidden" name="subject" value="Заказ"/>
						<input type="submit" class="ajax b-orange-butt" value="Заказать">
					</div>
				</form>
			</div>
		</div>
		<div id="b-popup-2">
			<div class="b-thanks b-popup">
				<h3>Спасибо!</h3>
				<h4>Ваша заявка успешно отправлена.<br/>Наш менеджер свяжется с Вами в течение часа.</h4>
				<input type="submit" class="b-orange-butt" onclick="$.fancybox.close(); return false;" value="Закрыть">
			</div>
		</div>
		<div id="b-popup-error">
			<div class="b-thanks b-popup">
				<h3>Ошибка отправки!</h3>
				<h4>Приносим свои извинения. Пожалуйста, попробуйте отправить Вашу заявку позже.</h4>
				<input type="submit" class="b-orange-butt" onclick="$.fancybox.close(); return false;" value="Закрыть">
			</div>
		</div>
		<div id="b-popup-decors">
			<div class="b-popup" >
				<a href="#" class="b-popup-close" title="Закрыть"></a>
					<div class="b-three-color"></div>
					<h2 class="b-title b-title-constructor">Выберите декор</h2>

						<div class="allTextures">
							<div class="currentTexture2"><img src="i/decor-1.jpg" title="Декор" width="90px" height="90px" data-id="decor-1"></div>
							<div class="currentTexture2"><img src="i/decor-2.jpg" title="Декор" width="90px" height="90px" data-id="decor-2"></div>
							<div class="currentTexture2"><img src="i/decor-3.jpg" title="Декор" width="90px" height="90px" data-id="decor-3"></div>
							<div class="currentTexture2"><img src="i/decor-4.jpg" title="Декор" width="90px" height="90px" data-id="decor-4"></div>
							<div class="currentTexture2"><img src="i/decor-5.jpg" title="Декор" width="90px" height="90px" data-id="decor-5"></div>
							<div class="currentTexture2"><img src="i/decor-6.jpg" title="Декор" width="90px" height="90px" data-id="decor-6"></div>
							<div class="currentTexture2"><img src="i/decor-7.jpg" title="Декор" width="90px" height="90px" data-id="decor-7"></div>
							<div class="currentTexture2"><img src="i/decor-8.jpg" title="Декор" width="90px" height="90px" data-id="decor-8"></div>
							<div class="currentTexture2"><img src="i/decor-1.jpg" title="Декор" width="90px" height="90px" data-id="decor-1"></div>
							<div class="currentTexture2"><img src="i/decor-2.jpg" title="Декор" width="90px" height="90px" data-id="decor-2"></div>
							<div class="currentTexture2"><img src="i/decor-3.jpg" title="Декор" width="90px" height="90px" data-id="decor-3"></div>
							<div class="currentTexture2"><img src="i/decor-4.jpg" title="Декор" width="90px" height="90px" data-id="decor-4"></div>
							<div class="currentTexture2"><img src="i/decor-5.jpg" title="Декор" width="90px" height="90px" data-id="decor-5"></div>
							<div class="currentTexture2"><img src="i/decor-6.jpg" title="Декор" width="90px" height="90px" data-id="decor-6"></div>
							<div class="currentTexture2"><img src="i/decor-7.jpg" title="Декор" width="90px" height="90px" data-id="decor-7"></div>
							<div class="currentTexture2"><img src="i/decor-8.jpg" title="Декор" width="90px" height="90px" data-id="decor-8"></div>
							<div class="currentTexture2"><img src="i/decor-1.jpg" title="Декор" width="90px" height="90px" data-id="decor-1"></div>
							<div class="currentTexture2"><img src="i/decor-2.jpg" title="Декор" width="90px" height="90px" data-id="decor-2"></div>
							<div class="currentTexture2"><img src="i/decor-3.jpg" title="Декор" width="90px" height="90px" data-id="decor-3"></div>
							<div class="currentTexture2"><img src="i/decor-4.jpg" title="Декор" width="90px" height="90px" data-id="decor-4"></div>
							<div class="currentTexture2"><img src="i/decor-5.jpg" title="Декор" width="90px" height="90px" data-id="decor-5"></div>
							<div class="currentTexture2"><img src="i/decor-6.jpg" title="Декор" width="90px" height="90px" data-id="decor-6"></div>
							<div class="currentTexture2"><img src="i/decor-7.jpg" title="Декор" width="90px" height="90px" data-id="decor-7"></div>
							<div class="currentTexture2"><img src="i/decor-8.jpg" title="Декор" width="90px" height="90px" data-id="decor-8"></div>
							<div class="currentTexture2"><img src="i/decor-1.jpg" title="Декор" width="90px" height="90px" data-id="decor-1"></div>
							<div class="currentTexture2"><img src="i/decor-2.jpg" title="Декор" width="90px" height="90px" data-id="decor-2"></div>
							<div class="currentTexture2"><img src="i/decor-3.jpg" title="Декор" width="90px" height="90px" data-id="decor-3"></div>
							<div class="currentTexture2"><img src="i/decor-4.jpg" title="Декор" width="90px" height="90px" data-id="decor-4"></div>
							<div class="currentTexture2"><img src="i/decor-5.jpg" title="Декор" width="90px" height="90px" data-id="decor-5"></div>
							<div class="currentTexture2"><img src="i/decor-6.jpg" title="Декор" width="90px" height="90px" data-id="decor-6"></div>
							<div class="currentTexture2"><img src="i/decor-7.jpg" title="Декор" width="90px" height="90px" data-id="decor-7"></div>
							<div class="currentTexture2"><img src="i/decor-8.jpg" title="Декор" width="90px" height="90px" data-id="decor-8"></div>
							<div class="currentTexture2"><img src="i/decor-1.jpg" title="Декор" width="90px" height="90px" data-id="decor-1"></div>
							<div class="currentTexture2"><img src="i/decor-2.jpg" title="Декор" width="90px" height="90px" data-id="decor-2"></div>
							<div class="currentTexture2"><img src="i/decor-3.jpg" title="Декор" width="90px" height="90px" data-id="decor-3"></div>
							<div class="currentTexture2"><img src="i/decor-4.jpg" title="Декор" width="90px" height="90px" data-id="decor-4"></div>
							<div class="currentTexture2"><img src="i/decor-5.jpg" title="Декор" width="90px" height="90px" data-id="decor-5"></div>
							<div class="currentTexture2"><img src="i/decor-6.jpg" title="Декор" width="90px" height="90px" data-id="decor-6"></div>
							<div class="currentTexture2"><img src="i/decor-7.jpg" title="Декор" width="90px" height="90px" data-id="decor-7"></div>
							<div class="currentTexture2"><img src="i/decor-8.jpg" title="Декор" width="90px" height="90px" data-id="decor-8"></div>
							<div class="currentTexture2"><img src="i/decor-1.jpg" title="Декор" width="90px" height="90px" data-id="decor-1"></div>
							<div class="currentTexture2"><img src="i/decor-2.jpg" title="Декор" width="90px" height="90px" data-id="decor-2"></div>
							<div class="currentTexture2"><img src="i/decor-3.jpg" title="Декор" width="90px" height="90px" data-id="decor-3"></div>
							<div class="currentTexture2"><img src="i/decor-4.jpg" title="Декор" width="90px" height="90px" data-id="decor-4"></div>
							<div class="currentTexture2"><img src="i/decor-5.jpg" title="Декор" width="90px" height="90px" data-id="decor-5"></div>
							<div class="currentTexture2"><img src="i/decor-6.jpg" title="Декор" width="90px" height="90px" data-id="decor-6"></div>
							<div class="currentTexture2"><img src="i/decor-7.jpg" title="Декор" width="90px" height="90px" data-id="decor-7"></div>
							<div class="currentTexture2"><img src="i/decor-8.jpg" title="Декор" width="90px" height="90px" data-id="decor-8"></div>
							<div class="currentTexture2"><img src="i/decor-1.jpg" title="Декор" width="90px" height="90px" data-id="decor-1"></div>
							<div class="currentTexture2"><img src="i/decor-2.jpg" title="Декор" width="90px" height="90px" data-id="decor-2"></div>
							<div class="currentTexture2"><img src="i/decor-3.jpg" title="Декор" width="90px" height="90px" data-id="decor-3"></div>
							<div class="currentTexture2"><img src="i/decor-4.jpg" title="Декор" width="90px" height="90px" data-id="decor-4"></div>
							<div class="currentTexture2"><img src="i/decor-5.jpg" title="Декор" width="90px" height="90px" data-id="decor-5"></div>
							<div class="currentTexture2"><img src="i/decor-6.jpg" title="Декор" width="90px" height="90px" data-id="decor-6"></div>
							<div class="currentTexture2"><img src="i/decor-7.jpg" title="Декор" width="90px" height="90px" data-id="decor-7"></div>
							<div class="currentTexture2"><img src="i/decor-8.jpg" title="Декор" width="90px" height="90px" data-id="decor-8"></div>
						</div>
			</div>
		</div>
	</div>
</body>
</html>